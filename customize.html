<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Improvemycity-mobile by MKLab-ITI</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="index">Improvemycity-mobile</a></h1>
        <p>The Android mobile version of the web-based ImproveMyCity application</p>

        <p class="view"><a href="https://github.com/MKLab-ITI/ImproveMyCity-Mobile">View the Project on GitHub <small>MKLab-ITI/ImproveMyCity-Mobile</small></a></p>


        <ul>
          <li><a href="https://github.com/MKLab-ITI/ImproveMyCity-Mobile/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/MKLab-ITI/ImproveMyCity-Mobile/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/MKLab-ITI/ImproveMyCity-Mobile">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
      <h1>Customize</h1>
      <p>ImproveMyCity-Mobile is written with Eclipse using the <a href="http://developer.android.com/tools/sdk/eclipse-adt.html">android developer tool (ADT)</a> and <a href="http://developer.android.com/sdk/index.html">Android SDK</a> with Android 2.3.3 – API 10. In order to compile the app you need to follow these steps in the correct order a) install the "Google Play Services" plug-in via Android SDK Manager; b) import the "google-play-services_lib" library project into your workspace; and c) Import the IMC mobile project into your workspace. Then link IMC project to the google-play-services_lib by "Project">"Properties">"Android">"Library">"ADD".See <a href="faq">FAQ</a> for instructions on how to do it.
      
      The mobile application is developed to communicate with the back-end Joomla component of ImproveMyCity web application. So in order to achieve the full functionality of the mobile app you need also to follow the instructions for <a href="https://github.com/icos-urenio/Improve-my-city/wiki">installing ImproveMyCity</a>.</p>
      <h2>Client side</h2>
      <p>In order for ImproveMyCity-Mobile to work for your municipality, several parameters should be changed. These parameters are located in four places:</p>
      <ul>
        <li>src/com/mk4droid/IMC_Store/Constants_API.java</li>
        <li>AndroidManifest.xml</li>
        <li>res/xml/myprefs.xml</li>
        <li>raw/polygoncoords.txt</li>
      </ul>
<p>In <strong>IMC_Store.Constants.java</strong> you should modify the following parameters:</p>
<p><strong>1. Server address</strong>. It can be textual or numeric (XXX.XXX.XXX.XXX), e.g. ServerSTR = "smartcitydemos.urenio.org";</p>
<p><strong>2. Server inner path</strong>. Inner path (concatenated after ServerSTR) where the PHP scripts are stored on the Server, e.g. phpExec = "/"; </p>
<p><strong>3. Server path of issues’ images</strong>. Inner path (concatenated after ServerSTR) where the images are stored on the Server, e.g.  remoteImages = "/";


</p>

<p><strong>4. Encryption key for the secure transmission of IMC password</strong>. It should match the one in ImproveMyCity joomla component. The default value is
EncKey = "1234567890123456";</p>

<p><strong>5. (Optional) Usage analytics</strong> key for Flurry analytics that monitors usage of application see www.flurry.com.
Flurry_Key = "your_key_goes_here”;</p>

<p>In <strong>raw/polygoncoords.txt</strong></p>

<p><strong>6. Geographical limits</strong> (polygon) from where issues can be sent are defined as from a sequence of Longitude-Latitude coordinates. Coordinates are separated with white space, e.g. "23.1094 40.5789 23.1111 40.5781 23.1126 40.5774 23.1094 40.5789". A point is defined from two coordinates. The polygon consists of all points. The polygon should be closed, i.e. first point should match last point. Latitude and Longitude can be obtained by from GoogleMaps by right-clicking on the desired points and selecting “What is here”. A better way is to generate a polygon from Google-Earth app and export it as a kml file (remove the altitude information ",0");</p>

<p>In <strong>AndroidManifest.xml</strong></p>

<p><strong>7. Google map api key.</strong> You should have two map api keys: 1) for debugging related to your android debug key; 2) for release version related to your android release key. See in android developer <a href="https://developers.google.com/maps/documentation/android/">here</a> about how to generate map api keys according to your android debug or release key. Only Google Maps Android API v2 is supported.</p>

<p>After obtaining the Google map api key it should be placed as shown below:
<br>android:name="com.google.android.maps.v2.API_KEY" android:value="your_key_goes_here"</p>


<p>In <strong>res/xml/myprefs.xml</strong></p>

<p><strong>8. Default UI language. In order to change the default user language changes in two files should be made</strong> 
<div style="padding-left: 2em;">
<p>1. res/xml/myprefs.xml<br />
  (line 27). Define the Menu language by setting the android:defaultValue parameter, e.g. android:defaultValue="en - English".  Default is English ("en - English"). Greek is also supported ("el - Ελληνικά"). See <a href="language">how to add a new language</a> if you want to add a language that is not currently supported.</p>

<p>2. IMC_Store/Constants_API.java<br />
change the variable<br/>
&nbsp;&nbsp;public static String DefaultLanguage = "en - English"; <br/>
with values as in step 1.</p>
</div>

<p><strong>9. Usage analytics</strong>  by using Flurry library is by default “true”. It can be modified in line 58, e.g. android:defaultValue="false"</p>

<p>Compile the application and you are done!</p>

<h2>Server Side</h2>
<p>The only setting is to define the exact same API KEY in Joomla administrator as shown in the screenshot</p>
<img src="img/imcm03.png" />
<p>Also make sure you have enable json controller on IMC Options</p>
<img src="img/imcm02.png" />
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/MKLab-ITI">MKLab-ITI</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
